<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Electron Demo</title>
	<!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<body>
	<h1>Electron Demo</h1>
	<p>We are using node <script>document.write(process.versions.node);</script>, Chrome <script>document.write(process.versions.chrome);</script>, and Electron <script>document.write(process.versions.electron);</script>.</p>
	<p id="stats-display"></p>
	<p id="graphs-display"></p>

	<script>
		const os = require('os');
		const { CpuUsageTracker } = require('./services/cpu-usage');
		const { renderCpuGraphs } = require('./services/graph-helper');
		const statsDisplay = document.getElementById('stats-display');
		const graphsDisplay = document.getElementById('graphs-display');
		let cpus = os.cpus();
		const renderInterval = 1000;

		const cpuTracker = new CpuUsageTracker(cpus);
		const graphs = renderCpuGraphs(graphsDisplay, renderInterval, cpus);

		setInterval(() => {
			cpus = os.cpus();

			const cpuStats = cpuTracker.update(cpus);
			cpuTracker.renderStats(statsDisplay, cpus, cpuStats.total);
			graphs.update(cpuStats.cpus);
		}, renderInterval);
	</script>
</body>

</html>